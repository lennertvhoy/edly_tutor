## Wat is Default Domain Policy?

Omdat het Windows-wachtwoord belangrijk is voor domeingebruikers in zoveel ondernemingen, is het standaard Windows wachtwoordbeleid in ieder geval het uitgangspunt voor de meeste organisaties, soms nog aangevuld met 1 of meerdere extra aparte instellingen voor bvb. administrators als het op inlogbeveiliging aankomt. Voor velen is er echter geen duidelijke reden om verder te gaan dan enkele standaardinstellingen. Deze instellingen worden best geconfigureerd via een group policy, nl. de "Default Domain Policy". 

  

![](https://cdn.talentlms.com/it1education/1633066528_password.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzMwNjY1MjhfcGFzc3dvcmQucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNzU2ODAwfX19XX0_&Signature=UhmJH2qQ1Syd9I0ZSHaRi%2F-bC7QpThD11lAQRUT3vJ-916TEWXFClaE0mexddJSzK%2FyS0P22I1G3ZbNanw3p%2FMJwRg-D1wZgYQLy%2Fhc0gx91bjez8VL7rPiEKKQ9iZ-CMNPqa%2FSKkthpm6GhIS5qtRTaaMUHPGRuW7NGcvsAvyVySo3i5PEVPPG57rk5KwZzzkSyuD%2FLVfLKyzMOmZzexOMCdox6Dxcomn2XAOhbWHldxIxiO5z6w8EJUf%2F-xAiRBjsKHzK3kTwFJgkEpC0dK%2Fbwi8MDGvX4wB-5QqsuO3Ul0twHPjsGsCdVf6IjD6Dc2--ZKBNsXbUtkXognXzIkw__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)Deze policy is actief op domein-niveau en we kunnen deze aanpassen naar onze wensen via de console "Group Policy Management Editor" (verder meer hierover). Wat we wel goed in ons achterhoofd moeten houden is dat we maximaal 1 'Password & Account Lockout Policy' per domein kunnen instellen. Indien we verschillende wachtwoordbeleidsinstellingen willen gebruiken, dan zullen we meerdere domeinen moeten opzetten.

  

|   |
|---|
|Binnen deze "Default Domain Policy" kunnen we, net zoals in andere policies, heel wat zaken configureren als ![](https://cdn.talentlms.com/it1education/1633036708_suru_uitroepteken.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzMwMzY3MDhfc3VydV91aXRyb2VwdGVrZW4ucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNzU2ODAwfX19XX0_&Signature=eXNvLCP9mACla6GdZHf3t3rSlzBkqmmArvh2-K%2FbIRtKt3nA112bpzjgGcTaMGztqs3VDl9wsulmh-ZaWLJPM5%2FJUurQhqBDcb4kbfYzoYk7372SETmI0PeNr5xVLvIFzBqC1kZJCPbj8f9AyknW369%2F%2FP1lQdY8JyQWR8PREHoaWSmP901X-VhlaXtztwtY0e9jaAuULdzgzGFTcx4MvUKGCfFeO1sO0zvyaLM06VY97RmXWlrV3%2FCHdMa5Usd1QtqubX6oL4q7SqIXK82-yGrUfqIUb-9IB7nllbjbMOAroutS1%2FizrVHVMqseaXfpyEy487l0hLzhVTEZOzpnHg__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)we willen. Het wordt echter sterk aangeraden om enkel een 'Pasword Policy' en 'Account Lockout Policy' in te stellen, al kan dit laatste wel eens achterwege worden gelaten voor gemakkelijkheidsredenen (naar oa. support toe). Dit wel configureren is natuurlijk steeds de betere en veiligere oplossing. Eventueel kunnen deze 2 configuraties wel nog aangevuld worden met een 'Kerberos Policy' maar best ook niet meer dan dat. De reden hiervoor is dat de logintijd van gebruikers bij "overconfiguratie" van de "Default Domain Policy" veel langer tot heel lang kan duren.|
## Password Policy

Dit is de policy die het gebruik van en de voorwaarden voor wachtwoorden vastlegt voor de gebruikers van het domein. Binnen deze policy kunnen we verschillende zaken configureren. Zo kunnen we bvb. de lengte van een wachtwoord instellen, de geldigheidsduur ervan meegeven, ...

  

![](https://cdn.talentlms.com/it1education/1633039892_password_policy.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzMwMzk4OTJfcGFzc3dvcmRfcG9saWN5LnBuZyIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTcxMTc1NjgwMH19fV19&Signature=cERT9tsD4OrUUpvnTC8RrHsyeO1VldwQt7s2cY0%2F4o7lA6jJcSHZBceKnUQvFj0PBBMds4EWKO5XxxLx%2F%2Fe3O0HVo6iOfMnuSGJRTJybgqiRJBafCHDovQWzt16SLjGB15NX44u6ZFI15OR-zS9DOp%2FFIaYFTTZ97jcY8pFh1-X5kDeuVfIc3z3eWCkUxce%2F-kwxTRCdpXxAinop7duPMRZT13Fq3K4wQrT%2FGSE8HytNKcRvNKIpT4W--1fS8644BmegE36h3TSngKrBTBizpU5zyUphBWTrSM4q4cafLL7MSi%2F9gmRSTNg0bein6lR39GTCNvvgUiDrEhA1t92ubw__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)

  

De opties die we kunnen aanpassen zijn de volgende:

Enforce password history: Hiermee stellen we in hoeveel wachtwoorden er onthouden kunnen worden. We hebben de keuze van 0 tot 24. In het geval van de standaard "24" zullen we dus 24 verschillende wachtwoorden moeten invoeren alvorens we het eerstgebruikte wachtwoord opnieuw zullen kunnen gebruiken.

Maximum password age: Deze instelling dient om mee te geven hoe lang hetzelfde wachtwoord geldig (actief) blijft. De waarde kan variëren van 0 tot 999 dagen. De standaardinstelling van Microsoft bij activering hiervan is "42 dagen" (6 weken).

Minimum password age: Hoe lang er gewacht moet worden om het wachtwoord te kunnen veranderen wordt via deze configuratie aangepast. Hier kunnen we kiezen van 0 tot 998 dagen. De actieve standaardconfiguratie van Microsoft hiervoor is 1 dag.

Minimum password lenght: Aan de hand hiervan kunnen we bepalen uit hoeveel karakters het wachtwoord minimaal moet bestaan. Microsoft heeft hier voor de standaard "7" gekozen bij inschakeling, maar we kunnen een aantal kiezen tussen 0 en 14.

Password must meet complexity requirements: In plaats van een waarde moeten we hier gewoon meegeven of deze optie 'enabled' of 'disabled' is. Als we kiezen voor 'enabled', wat de beste en veiligste keuze is, dan moet een wachtwoord aan bepaalde voorwaarden voldoen, nl. minstens 3 van deze mogelijkheden moeten aanwezig zijn: een hoofdletter, een kleine letter, een cijfer, een speciaal teken.

Store passwords using reversible encryption: Dit is een instelling die zelden 'enabled' zal worden omdat dit gewoon geen goed idee is! Deze configuratie zorgt ervoor dat wachtwoorden niet encrypted maar in 'plain text' worden bewaard, wat dus een groot veiligheidsrisico inhoudt.

## Account Lockout Policy

Een Account Lockout Policy is iets wat in veel bedrijven niet of nauwelijks wordt toegepast. Het kan nochtans bepaalde problemen naar security met user accounts verhelpen. Hoe lang en na hoeveel verkeerde logins een account wordt geblokkeerd wordt via deze policy-instellingen aangepast.

  

![](https://cdn.talentlms.com/it1education/1633040279_account_lockout_policy.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzMwNDAyNzlfYWNjb3VudF9sb2Nrb3V0X3BvbGljeS5wbmciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTE3NTY4MDB9fX1dfQ__&Signature=aqs-C930SFpG8Eh3Wx2wiFdWiLsG-HEyvJUvszjjgmW3srE8thk2UahEruJ7Oci1uD73h2JReLqeJGuG8sfYRfRTueymdaN4iKYNuXx-Oj5aPRMnJEPwSvxxJcxx7aWeWUjsyknmnGByBBXDt%2F5SXP2-FBdtKDMg88X8ZxTbPnKi76wxseX4dPSc2b1ZPsAGR%2F0yO-LZhl57ixlSle3j3ESwCqyA%2FrlYW7%2FdT0vqCH6godRTpwCvNZCMr4AH84N-RwS4DOopoPFMCBECnF3-JD3%2FrKwoVudYdRZIYIMXdBGNaW35rrUkb5hhWS2FBp5WjCrySa6TTirFSiky9l1bHg__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)

  

De opties hier zijn:

Account lockout duration: Hoe lang een account wordt gelocked wordt met deze instelling aangepast. De standaardinstelling van Microsoft bij activering hiervan is "30 dagen".

Account lockout treshold: Deze optie dient om in te stellen hoeveel foutieve pogingen een gebruiker heeft vooraleer de account geblokkeerd wordt. De actieve standaard van Microsoft hierbij is "5 foutieve pogingen".

Reset account lockout counter after: Hier kunnen we instellen hoe lang het duurt vooraleer de teller voor mislukte pogingen terug op "0" wordt ingesteld. Standaard zal deze setting dezelfde zijn als die van 'account lockout duration' maar we kunnen dit ook zelf aanpassen naar een andere waarde. Deze waarde kan wel nooit groter zijn dan de 'account lockout duration'.

  

|   |
|---|
|![](https://cdn.talentlms.com/it1education/1633036708_suru_uitroepteken.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzMwMzY3MDhfc3VydV91aXRyb2VwdGVrZW4ucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNzU2ODAwfX19XX0_&Signature=eXNvLCP9mACla6GdZHf3t3rSlzBkqmmArvh2-K%2FbIRtKt3nA112bpzjgGcTaMGztqs3VDl9wsulmh-ZaWLJPM5%2FJUurQhqBDcb4kbfYzoYk7372SETmI0PeNr5xVLvIFzBqC1kZJCPbj8f9AyknW369%2F%2FP1lQdY8JyQWR8PREHoaWSmP901X-VhlaXtztwtY0e9jaAuULdzgzGFTcx4MvUKGCfFeO1sO0zvyaLM06VY97RmXWlrV3%2FCHdMa5Usd1QtqubX6oL4q7SqIXK82-yGrUfqIUb-9IB7nllbjbMOAroutS1%2FizrVHVMqseaXfpyEy487l0hLzhVTEZOzpnHg__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)De standaardinstellingen van Windows Server zijn niet noodzakelijk dezelfde als die in de Windows Security Baselines, dit zijn beleidsinstellingen "op basis van feedback van Microsoft-teams, productgroepen, partners en klanten." De baselines zijn opgenomen in de Microsoft Security Compliance Toolkit, die ook beleidsgerelateerde tools voor beheerders bevat. De beveiligingsbasislijnen dienen als een andere veel voorkomende instelling, omdat ze een door Microsoft goedgekeurde configuratie zijn.|
## Geblokkeerde accounts

Het kan wel eens voorkomen dat een gebruiker meerdere keren een foutief wachtwoord ingeeft. Indien er een Lockout Policy is ingesteld, dan zal deze account geblokkeerd worden en de gebruiker zal niet meer kunnen inloggen voor een bepaalde tijd. Het is echter mogelijk om deze account toch te deblokkeren (unlocken) alvorens deze tijd is verstreken zodat de gebruiker direct terug aan de slag kan gaan. Dit kunnen we zowel in de console ADUC als ADAC doen.

In ADUC gaan we hiervoor naar de Properties van deze account en onder het tabblad 'Account' vinken we "Unlock account" aan. Vergeet evenwel niet om ook een nieuw wachtwoord in te stellen indien de gebruiker zijn wachtwoord niet meer weet !!!

In ADAC kunnen we dit doen in het startvenster (Overview) van de console. Als we de gebruiker een nieuw wachtwoord meegeven kunnen we "Unlock account" aanvinken waardoor deze gebruiker opnieuw zal kunnen inloggen.

![](https://cdn.talentlms.com/it1education/1634970810_ADUC_user_unlock_account.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5NzA4MTBfQURVQ191c2VyX3VubG9ja19hY2NvdW50LnBuZyIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTcxMTc1NjgwMH19fV19&Signature=IN6NeAzF9tHeTcdWAFgEIcd4i2jDuTSq9d2jqySFCit4qrfxhKFHCqTYeXTh-NzTmFgGWBHioG0osUiSNY5e%2FUzLYZ22ux4kovEc-NvXfTpTvCwhC--2xw8tsQMGqLl0vvaCYQj8ug69hMRDiICeUPg5NOnzOfpDvO783ZsZXzVdcWbeD0mvt80c2iwZ0EwMjp4EFHLVqr-qYPPM40GD1kCdhp2QeaIvqRX53JZNDrxrFCJMmcj%2FtfDt9Sy9S-SWWn%2Fsf9pT%2F%2F0WhR1kGCSymDIXYGohoOkq9CtRqfFn4BJimrketz79s-BVWd2PZy3weIMosoMKSmrV3Kgvpd58-g__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)    ![](https://cdn.talentlms.com/it1education/1634970844_ADAC_reset_password_unlock_account.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5NzA4NDRfQURBQ19yZXNldF9wYXNzd29yZF91bmxvY2tfYWNjb3VudC5wbmciLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE3MTE3NTY4MDB9fX1dfQ__&Signature=Q2wYttewklXGJEyAA%2FWF754i0Z%2F9ZvWUcRJ-3NbjuoWhB8fgTtEQgB5jNbpdjeB9qItVl8zwFSuYGf8M3CkJf8bxbmtrpVEMwttrExSwsgJbmD%2FP7EVz3CAjel9BrbJETASQ09Cleg4PHMMkJU37SBs8GKsSuvI8GZV1SUeSmOY8ZiXlAP9of9F5yPgbaeojhJ4gVqzk9cVTydkSJMlSA80GObDJsd1ahXz38uxyaq2lYEWa9al0iI-PlMyxeNfBANCPTgBFpMFq4IeDFAks1KeQeXYC7WDNvU8yHcvYW0TZ1i93ebSjZGihQKY5rUc8OZhkElP2nrx8LlpnuTWjDA__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)

## Wat is PSO?

Als beheerders zijn we ons bewust van het feit dat gebruikers en groepen verschillende niveaus in de hiërarchie van onze organisatie innemen en niet allemaal dezelfde rechten hebben. Sommige accounts (administrators, service accounts, ...) vereisen om voor de hand liggende veiligheidsredenen een sterker wachtwoordbeleid dan andere. Dit kunnen we niet configureren via de "Default Domain Policy", maar hiervoor kunnen we wel een beroep doen op "Password Setting Object" (PSO). Dit is een apart object, meerbepaald 'Password Settings Container', binnen onze AD-omgeving dat we grafisch uitsluitend via de console ADAC (dus niet in ADUC of GPMC!) kunnen bekijken en/of aanpassen.

  

PSO Fine-Grained Password Policy (FGPP) biedt de mogelijkheid om verschillende wachtwoord- en accountvergrendelingsbeleidsregels in te stellen voor verschillende groepen en/of gebruikers in hetzelfde domein, waardoor de AD-omgeving veiliger wordt. FGPP's verbreden de reikwijdte van wachtwoordbeveiliging door meerdere wachtwoordbeleidsregels binnen één domein te hebben. Een PSO bevat weliswaar dezelfde wachtwoordinstellingen als in alle andere GPO's. Om verschillende instellingen toe te passen op groepen en/of gebruikers, moeten we een nieuwe PSO aanmaken en de instellingen configureren volgens de vereisten. Wanneer een PSO wordt toegepast op een gebruiker, gebruikt deze niet langer het wachtwoordbeleid dat is geïmplementeerd door de "Default Domain Policy". In plaats daarvan gebruikt hij/zij nu de opgegeven PSO-instellingen.

  

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Elke PSO moet een prioriteitsindex (precedence) hebben. Dit werkt net zoals bij 'index number' van gewone GPO's. ![](https://cdn.talentlms.com/it1education/1633036708_suru_uitroepteken.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzMwMzY3MDhfc3VydV91aXRyb2VwdGVrZW4ucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNzU2ODAwfX19XX0_&Signature=eXNvLCP9mACla6GdZHf3t3rSlzBkqmmArvh2-K%2FbIRtKt3nA112bpzjgGcTaMGztqs3VDl9wsulmh-ZaWLJPM5%2FJUurQhqBDcb4kbfYzoYk7372SETmI0PeNr5xVLvIFzBqC1kZJCPbj8f9AyknW369%2F%2FP1lQdY8JyQWR8PREHoaWSmP901X-VhlaXtztwtY0e9jaAuULdzgzGFTcx4MvUKGCfFeO1sO0zvyaLM06VY97RmXWlrV3%2FCHdMa5Usd1QtqubX6oL4q7SqIXK82-yGrUfqIUb-9IB7nllbjbMOAroutS1%2FizrVHVMqseaXfpyEy487l0hLzhVTEZOzpnHg__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)PSO's met precedence "1" hebben voorrang op die met een hogere prioriteitsindexwaarde (bvb. 5).  Er kan ook maar één 'Password Setting Object' ooit van toepassing zijn op een gebruikersaccount. De PSO met de laagste precedence, dus het dichtst bij 1, is van toepassing. PSO's die aan gebruikersaccounts zijn gekoppeld, hebben altijd voorrang op PSO's die aan groepen zijn gekoppeld. Probeer toch zoveel mogelijk PSO's toe te passen op groepen en zorg ervoor dat alle PSO's een uniek prioriteitsindexnummer hebben! |