## Hoezo, routing door een Windows Server?

Windows Server voorziet heel wat rollen om de server een bepaalde functie te laten uitoefenen, zo ook is er Remote Access, ook wel RRAS genoemd. RRAS staat voor "Routing & Remote Access Service" en bevat 3 role services, nl. Remote Access Service (RAS), routing en Web Application Proxy. We gaan ons beperken tot het bespreken van de eerste 2 role services. In dit onderdeel gaan we het hebben over "Routing" en het volgende onderdeel gaat dieper in op VPN wat zich bevindt binnen "Remote Access Service".

![](https://cdn.talentlms.com/it1education/1634923450_RRAS-role.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5MjM0NTBfUlJBUy1yb2xlLnBuZyIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTcxMTU4NDAwMH19fV19&Signature=M4OYz2aippQJKCB0H6TXwZGLQs%2F4C7Sz593Rk8-zH2ZPDqLmpb4kqLRRslitZzu1D2X0X4M5aPiPDf5hConyRj1psqmVBIOEg5fCMNS4JC6UMkqro0TB8D4CEO%2Fff5EgBLPeY%2FaQ8sFPBYiJcEB3l0YkyMa2z5yN%2FML-NaovDOzGg1YdWprs2NCfZYmIaTGh3uUd747mg-YWXrfOpKv5Fe5qnaOsP5Xplb5Ok8oyStiFTc6UJI7xFqLvoWIbHH6x1QidZqt-FqZHJcvPkibnNwrt-QiwT06al%2Fn25VCtdZvSrc9NPeM1%2F9uZBKutB-Xb7n5x%2FPn1CsRieGklx8%2Fhag__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)  

Routing zorgt er eigenlijk voor dat de server zal fungeren als een router. We kunnen dus 2 of meerdere (sub)netwerken verbinden met elkaar met behulp van een Windows Server. Dit kan zowel een fysieke server zijn als een virtuele machine, al wordt een virtuele machine door Microsoft zelf afgeraden. Naast static routing biedt "Routing" ook ondersteuning voor NAT-routers, LAN-routers met BGP, Routing Information Protocol (RIP) en multicast-compatibele routers die gebruikmaken van Internet Group Management Protocol (IGMP).

  

Bij static routing gaan we handmatig vastgelegde routes meegeven waarover het netwerkverkeer zal verlopen. Dit kan handig zijn in kleine netwerken en biedt soms een oplossing om kleine routingproblemen te verhelpen, maar is niet te gebruiken in grote netwerken. We zouden teveel verschillende routes moeten ingeven. Daarvoor is het gemakkelijker om een dynamisch protocol zoals bvb. RIPv2 te gebruiken. Hierbij broadcast elke router zijn routinginformatie naar andere routers waardoor deze ook de routes kennen. Op die manier is het niet nodig om veel routes in te geven om het netwerkverkeer goed te laten verlopen.

  

|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| In de praktijk zal routing echter nooit gedaan worden door een Windows Server. Hiervoor gaan we gebruikmaken ![](https://cdn.talentlms.com/it1education/1634969464_suru_uitroepteken.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5Njk0NjRfc3VydV91aXRyb2VwdGVrZW4ucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNTg0MDAwfX19XX0_&Signature=TXpY5AIYadDx6RxgJku57Tf%2Fh%2FSHsSINP3YMdQmiNTFea5Zq3AQ9DplMutpye2-zJFOOq33iLoSxzbm0wZ7Xm3mp7CpPgxfixjf46ys9lp5V6onqY3f63IVCvoeemmvxUZSJS2zGpiptQMiqW4nH0s0gd0ZAOSnZmHXVY1hzZ4nTPfYiiX2LMBq-iEqYjEi5qPiWhk8bMx1VYkwHkveJRv4vbKt5oF1TVmEfzLHNaxNSc0tWsZogFV705v96-o0sCZnot9iBNeS1WZFC24ffIruTMUuQgfxGmSIW5F52gSjsrde2UxUnspZXZeKkt3v2r9jDmIaEmf4EKvgaahlLxA__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)van dedicated routers van Cisco, Juniper, D-link, … Deze routers hebben extra functionaliteiten en zijn ook sneller. Ook voor de kostprijs is het interessant om te opteren voor een router i.p.v. een server die routing zal doen. Natuurlijk moet je rekening houden dat voor het configureren van deze apparaten ook bepaalde kennis vereist is. Weinig van deze apparaten hebben een grafische- of webinterface die kan gebruikt worden. |
## Soorten routing onder Windows Server

Binnen Windows Server zijn er verschillende soorten routing die we kunnen gebruiken als we RRAS hebben geïnstalleerd. Dit hebben we reeds in het vorige onderdeel vermeld. Wij gaan er 2 soorten uitlichten: NAT-routing en LAN-routing. Bij beide soorten routing zijn er minstens 2 netwerkkaarten nodig om de routing mogelijk te maken!! Het is bovendien perfect mogelijk om de beide soorten routing te combineren op 1 server.

  

We bekijken beide soorten routing onder Windows Server van naderbij in de volgende onderdelen, al heeft dit natuurlijk geen geheimen meer voor jullie na de lessen over netwerken...

## LAN-routing

Als we ervoor kiezen om LAN-routing te configureren, dan kunnen we verschillende LAN's of subnets met elkaar verbinden zodat deze met elkaar kunnen communiceren. We kunnen hierbij zowel static routing gebruiken of kunnen ook een ondersteund dynamisch routingsprotocol hanteren om de communicatie correct te configureren.  

![](https://cdn.talentlms.com/it1education/1634922350_LAN-routing.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5MjIzNTBfTEFOLXJvdXRpbmcucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNTg0MDAwfX19XX0_&Signature=AZJDIT6JQ--gQ14hs5hPr4A3knlVM-HpWzVtTgEjHww%2FpAper5NUuR1OaAgHTHoYZ0rfFVpwrh3fm-5cFuA4XmGPvcWW9N4srW2t1YJNam76z15NaHtZvs4Ok%2FM6dPmdx7vh8hDusjR6NGO3WfJK-YDO5DadpyPRpE2ZGEHNd%2FRF%2FAc8zQl-6CS4tF%2FgF0fhCBrCb2NUyFf27h3OREJPdHaryH5bcpO9zvOEICCL%2F5%2FLMy7We8fRQJ4BuVJqh6YSkctZIEeiJu1YFhAq-Ulbk0lb9QlM8Ijwpi3VySoDuWVymNS6YkTt-tMnU0YUyOLv2iE6Nl3HaGM5k6aCQTHgdQ__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)
## NAT-routing

De afkorting NAT staat voor Network Address Translation en zorgt ervoor dat private IP-adressen worden omgezet naar een publiek IP-adres om zo toegang te verkrijgen tot een WAN zoals bvb. internet. Van buitenaf is dus enkel het publieke IP-adres gekend, niet het private adres.  

![](https://cdn.talentlms.com/it1education/1634922855_NAT-routing.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5MjI4NTVfTkFULXJvdXRpbmcucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNTg0MDAwfX19XX0_&Signature=jO1gSzP-QoKbAT9tMiCp2GGGV4Dr2zWoljcA01TGDocCeqkrZ7cJKRMljz1jwIfbvqcTNdFKsTYQ26YxnBXtP3zkYitXeYygRKVNWy7jS-lpcyH1OS3yAXfFF69MRWc5b0mm85NWt8IAMgw2OJkdH9eB7syuuuHPjv1uC5HZoAwKLS3hQDv54H7q-KOuynyadMVqhcwdfJMPdx2jT4vGf2Bz9yIWgd2GxLNuxPMRclas9oVrlz8cSq6lwBg1%2F8i9C%2FWMo6hTBiIynmeQpwGas%2FhAHjEUhhuZCKsdIttfwHRftY1z20qoHcoBjERonBS9WmmJprUQnhYItvu1lY7Jkw__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)

  

|   |
|---|
|Er bestaan 3 verschillende soorten van NAT-configuraties, afhankelijk van het aantal adressen dat wordt gebruikt.<br><br>1. Statische NAT  <br>    Hierin wordt één enkel privaat IP-adres toegewezen aan een enkel openbaar IP-adres, d.w.z. een privaat IP-adres wordt vertaald naar een openbaar IP-adres. Het wordt gebruikt in webhosting.<br>2. Dynamische NAT  <br>    In dit type NAT worden meerdere private IP-adressen toegewezen aan een pool van openbaar IP-adressen. Het wordt gebruikt wanneer we weten hoeveel vaste gebruikers op een bepaald moment toegang tot internet willen hebben.<br>3. ![](https://cdn.talentlms.com/it1education/1634969464_suru_uitroepteken.png?Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6XC9cL2Nkbi50YWxlbnRsbXMuY29tXC9pdDFlZHVjYXRpb25cLzE2MzQ5Njk0NjRfc3VydV91aXRyb2VwdGVrZW4ucG5nIiwiQ29uZGl0aW9uIjp7IkRhdGVMZXNzVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNzExNTg0MDAwfX19XX0_&Signature=TXpY5AIYadDx6RxgJku57Tf%2Fh%2FSHsSINP3YMdQmiNTFea5Zq3AQ9DplMutpye2-zJFOOq33iLoSxzbm0wZ7Xm3mp7CpPgxfixjf46ys9lp5V6onqY3f63IVCvoeemmvxUZSJS2zGpiptQMiqW4nH0s0gd0ZAOSnZmHXVY1hzZ4nTPfYiiX2LMBq-iEqYjEi5qPiWhk8bMx1VYkwHkveJRv4vbKt5oF1TVmEfzLHNaxNSc0tWsZogFV705v96-o0sCZnot9iBNeS1WZFC24ffIruTMUuQgfxGmSIW5F52gSjsrde2UxUnspZXZeKkt3v2r9jDmIaEmf4EKvgaahlLxA__&Key-Pair-Id=APKAJDCWVQTW4P3KI3XA)Port Address Translation (PAT)  <br>    Dit wordt ook wel eens 'NAT overload' genoemd. Hierin kunnen veel lokale (private) IP-adressen worden vertaald naar één openbaar IP-adres. Poortnummers worden gebruikt om het verkeer te onderscheiden, d.w.z. welk verkeer bij welk IP-adres hoort. Dit wordt het meest gebruikt omdat het kosteneffectief is, aangezien duizenden gebruikers met het internet kunnen worden verbonden door slechts één echt wereldwijd (openbaar) IP-adres te gebruiken.|